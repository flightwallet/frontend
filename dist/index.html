<!DOCTYPE html>
<html>
  <head lang='en'>
    <meta charset='UTF-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <title>kassa â€“ pay with crypto securely</title>
    <link href='favicon.png' rel='shortcut icon'>
    <link rel="stylesheet" href="./style.css">
  </head>

  <body>
    <section class="wrapper">
        <div class="section">
            <h1 class="header">Flight.wallet kassa</h1>
            <div class="block" id="step-1">
                <b>Enter billing information</b>

                <div class="buttonRow">
                    <button
                        class="selectBtn"
                        id="btcButton"
                        onclick="setSelectCurrency('BTC')"
                    >
                        BTC
                    </button>
                    <button
                        class="selectBtn"
                        id="ethButton"
                        onclick="setSelectCurrency('ETH')"
                    >
                        ETH
                    </button>
                </div>

                <span id="error">ETH comming soon, please select BTC</span>

                <label class="field">Amount</label>
                <input type="number" id="numberInput" class="input" placeholder="amount">

                <label class="field">Recipient address</label>
                <input type="text" id="title" title="number" class="input" placeholder="address">
                <button class="generate_btn" id="generateBtn">Generate invoice</button>
            </div>

            <div class="block" id="step-2">
                <b>Scan sender address</b>
                <video id="qrScanner" muted autoplay playsinline width="100%" height="250px"></video>
            </div>

            <div class="block" id="step-3">
                <span>To: <a href="" target="_blank" id="toAddress"></a></span>
                <span>From: <a href="" target="_blank" id="fromAddress"></a></span>
                <span>Amount: <b id="enterAmount"></b></span>
                <button class="confirmBtn" id="confirmBtn">Confirm</button>
            </div>

            <div class="block" id="step-4">
                <p>Read and sign this transaction</p>
                <canvas id="canvas" width="100%" height="400px"></canvas>
            </div>

            <div class="block" id="step-5">
                <b>See QR with sign transaction</b>
                <video id="qrScanner1" muted autoplay playsinline width="100%" height="250px"></video>
                <a href="" target="_blank" id="txHex"></a>
                <button onclick="window.location.reload()" class="confirmBtn" id="reloadBtn" >Again</button>
            </div>

        </div>

    </section>
    <script>
        const error = document.getElementById('error')
        const btcButton = document.getElementById('btcButton')
        const generateBtn = document.getElementById('generateBtn')
        const title = document.getElementById('title')

        title.value = JSON.parse(window.localStorage.getItem('recipient-address'))


        let selectCurrency

        const setSelectCurrency = (value) => {
            selectCurrency = value

            if (selectCurrency === 'ETH') {
                error.style.display = 'block'
                btcButton.style.background = '#c9c9c9'
                generateBtn.disabled = true
            } else {
              btcButton.style.background = 'green'
              error.style.display = 'none'
              generateBtn.disabled = false
            }
        }
    </script>
    <script src="main.js"></script>
    <!-- Yandex.Metrika counter -->
    <script type="text/javascript" >
        (function (d, w, c) {
            (w[c] = w[c] || []).push(function() {
                try {
                    w.yaCounter50897126 = new Ya.Metrika2({
                        id:50897126,
                        clickmap:true,
                        trackLinks:true,
                        accurateTrackBounce:true,
                        webvisor:true
                    });
                } catch(e) { }
            });

            var n = d.getElementsByTagName("script")[0],
                s = d.createElement("script"),
                f = function () { n.parentNode.insertBefore(s, n); };
            s.type = "text/javascript";
            s.async = true;
            s.src = "https://mc.yandex.ru/metrika/tag.js";

            if (w.opera == "[object Opera]") {
                d.addEventListener("DOMContentLoaded", f, false);
            } else { f(); }
        })(document, window, "yandex_metrika_callbacks2");
    </script>
    <noscript><div><img src="https://mc.yandex.ru/watch/50897126" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
    <!-- /Yandex.Metrika counter -->

  </body>

</html>
